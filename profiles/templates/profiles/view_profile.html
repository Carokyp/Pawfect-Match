{% extends "base_auth.html" %}
{% load static %}

{% block title %}My Profile{% endblock %}
{% block content_class %}discover-page-wrapper{% endblock %}

{% block content %}

<div class="discover-page profile-view-page">

  <!-- APP HEADER -->
  <header class="discover-header">
    <h1 class="app-logo m-0">Pawfect Match</h1>
  </header>

  <div class="profile-toolbar">
    <span class="profile-title">PROFILE</span>
    <a href="{% url 'edit_owner_profile' %}" class="profile-gear" aria-label="Edit profile">⚙️</a>
  </div>

  <div class="profile-view dog-view">
    {% if dog %}
    <div class="profile-card profile-card-view">
      <div class="card-header-bar">
        <a href="{% url 'edit_dog_profile' %}" class="btn-outline">Edit</a>
      </div>

      <div class="profile-image">
        {% if dog.profile_photo %}
          <img src="{{ dog.get_photo_url }}" alt="Dog photo" fetchpriority="high">
        {% else %}
          <img src="{% static 'images/dog_placeholder.png' %}" alt="Dog photo">
        {% endif %}

        <div class="image-overlay left">
          <h2>{{ dog.name }}{% if dog.age %}, {{ dog.age }}{% endif %}</h2>
          <p>{{ dog.breed }}</p>
          <p>{{ dog.owner.city }}</p>
          <p>{{ dog.get_gender_display }}</p>
        </div>
      </div>

      <hr class="profile-divider">

      <div class="profile-about center">
        <h3>About me</h3>
        <p>{{ dog.about_me }}</p>
      </div>

      <hr class="profile-divider">

      <div class="profile-meta">
        <div class="meta-block">
          <h4>Energy level</h4>
          <span class="tag">{{ dog.get_energy_level_display }}</span>
        </div>

        <div class="meta-block">
          <h4>Size</h4>
          <span class="tag">{{ dog.get_size_display }}</span>
        </div>
      </div>
    </div>
    {% else %}
    <div class="empty-state-small">
      <p>No dog profile yet</p>
      <a href="{% url 'create_dog' %}" class="btn-primary">Add My Dog</a>
    </div>
    {% endif %}
  </div>

  <div class="profile-view owner-view">
    <div class="profile-card profile-card-view">
      <div class="card-header-bar">
        <a href="{% url 'edit_owner_profile' %}" class="btn-outline">Edit</a>
      </div>

      <div class="profile-image">
        {% if owner.profile_photo %}
          <img src="{{ owner.get_photo_url }}" alt="Owner photo" fetchpriority="high">
        {% else %}
          <img src="{% static 'images/owner_placeholder.png' %}" alt="Owner photo">
        {% endif %}

        <div class="image-overlay left">
          <h2>{{ owner.name }}{% if owner.age %}, {{ owner.age }}{% endif %}</h2>
          <p>{{ owner.occupation }}</p>
          <p>{{ owner.city }}</p>
        </div>
      </div>

      <hr class="profile-divider">

      <div class="profile-about center">
        <h3>About me</h3>
        <p>{{ owner.about_me }}</p>
      </div>

      <hr class="profile-divider">

      <div class="profile-interests left">
        <h4>Interests</h4>
        <div class="profile-tags">
          {% for interest in owner.interests_list %}
            <span class="tag">{{ interest }}</span>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <div class="log_out">
    <form method="POST" action="{% url 'logout' %}">
      {% csrf_token %}
      <button type="submit" class="btn-outline btn-logout">Log Out</button>
    </form>
  </div>

  <!-- BOTTOM NAV -->
  <nav class="bottom-nav">
    <a href="{% url 'browse_dogs' %}">Discover</a>
    <a href="{% url 'matches_list' %}">Matches</a>
    <a href="{% url 'messages_inbox' %}">Messages</a>
    <a href="{% url 'view_profile' %}" class="active">Profile</a>
  </nav>

</div>

{% endblock %}
